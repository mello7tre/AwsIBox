Base: &base
  IBOX_ENABLED: False
  IBOX_LINKED_OBJ:
    Key: Route53RecordSet
    Type: ApiGatewayDomainName.IBOX_INDEXNAME
    Conf:
      IBOX_RESNAME: RecordSet.IBOX_RESNAME
  IBOX_OUTPUT:
    - _:
        Value: Ref(IBOX_RESNAME)
        Export: Export(IBOX_RESNAME)


global:
  ApiGatewayDomainName:
    - IBOX_BASE: *base
    - Global:
        CertificateArn: get_endvalue('GlobalCertificateArn')
        DomainName: Sub('saas-apis.%s' % cfg.HostedZoneNameEnv)
        EndpointConfiguration:
          Types:
            - 'EDGE'
    - Regional:
        IBOX_ENABLED: True
        DomainName: Sub('api.%s' % cfg.HostedZoneNameRegionEnv)
        EndpointConfiguration:
          Types:
            - 'REGIONAL'
        RegionalCertificateArn: get_endvalue('RegionalCertificateArn')
