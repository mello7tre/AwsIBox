global:
  IAMPolicy:
    - LambdaECSRunTaskTrigger:
        PolicyName: Sub('LambdaECSRunTaskTrigger_${AWS::StackName}')
        Roles:
          - get_expvalue('RoleLambdaECSRunTask')
        PolicyDocument:
          Statement:
            - RunTask:
                Action:
                  - 'ecs:RunTask'
                  - 'ecs:StartTask'
                Effect: Allow
                Resource: Ref('TaskDefinitionFargate')
            - PassRole:
                Action:
                  - 'iam:PassRole'
                Effect: Allow
                Resource: GetAtt('RoleTask', 'Arn')
  TaskDefinition:
    - Fargate:
        IBOX_ENABLED: True
        Cpu: '1024'
        Memory: '2048'
